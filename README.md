# SkyHub World — Полное описание игровой и процедурной логики
Версия: MVP Specification

## 1. Общая концепция

SkyHub World — платформа виртуальной авиации, в которой пилот развивается внутри виртуальной авиакомпании.  
Система моделирует обучение, допуски на типы воздушных судов, планирование и выполнение рейсов, оценку качества полётов, рост ранга, снижение метеоминимума, получение достижений и участие в жизни компании.

Основной принцип:
Развитие основано на личном мастерстве и стабильном качественном пилотировании, а не на количестве рейсов.

---

## 2. Основной цикл пилота

1. Регистрация и получение доступа.
2. Сдача вступительного экзамена.
3. Запрос тайп-рейтинга.
4. Сдача теоретического экзамена на тип.
5. Тренажёрная сессия под инструктором.
6. Получение допуска на тип.
7. Выбор рейса или формирование трипа.
8. Выполнение рейса через ACARS.
9. Получение оценки (рейтинг).
10. Начисление XP и Credits.
11. Рост ранга, расширение доступа, снижение минимума, получение ачивок.

---

## 3. TRIP (серия рейсов)

Трип — последовательность от одного до нескольких рейсов.

Перед стартом трипа пилот может:
- выбрать тип ВС (при наличии допуска)
- проверить техническое состояние ВС
- загрузить OFP (SimBrief)
- выбрать запасные аэродромы
- изменить время вылета в рамках допустимого окна

Во время полёта ACARS автоматически отслеживает всё:
конфигурацию, механизацию, светотехнику, перегрузки, скорости, стабилизацию захода, время, паузы, ошибки.

После завершения трипа формируется отчёт (PIREP).

---

## 4. Рейтинг полёта (0–100)

Базовое значение рейтинга: **100**  
Каждое нарушение снижает рейтинг согласно системе штрафов.  
Минимальный рейтинг (если рейс не дисквалифицирован): **10**.

### Штрафы

# Таблица контроля качества полёта (Рейтинг 0–100)

| Фаза | Условие | Штраф | Уровень |
|------|---------|-------|---------|
| Стоянка / запуск | Навигационные огни (NAV) не включены перед запуском |  | Minor |
| Стоянка / запуск | Проблесковый маяк (BEACON) не включён перед запуском или выталкиванием |  | Minor |
| Стоянка / запуск | Ответчик (XPDR) не включён перед запуском/выталкиванием |  | Minor |
| Руление перед вылетом | Рулёжные фары не включены перед началом руления |  | Minor |
| Руление перед вылетом | Скорость руления > 30 узлов |  | Major |
| Взлёт | Взлёт с убранными закрылками |  | Critical |
| Взлёт | Довыпуск механизации во время разбега |  | Major |
| Взлёт | Strobe не включены перед занятием ВПП |  | Minor |
| Взлёт | Закрылки не во взлётной конфигурации |  | Major |
| Взлёт | Tailstrike на взлёте |  | Critical |
| Взлёт | Неуборка шасси после взлёта (до 1000 ft AGL) |  | Minor |
| Взлёт | Взлёт с недостаточным запасом топлива |  | Major |
| Взлёт | Не выдержан профиль V2+15 на первых 500 ft AGL |  | Minor |
| Взлёт | Таймер полёта не запущен |  | Minor (используется для ачивок) |
| Набор эшелона | Неправильная уборка закрылков по скорости/профилю |  | Minor/Major |
| Набор эшелона | Посадочные фары не выключены после 10.000 ft AGL |  | Minor |
| Круиз | Пауза симулятора в полёте |  | Major |
| Круиз | Полёт в режиме ускорения (time compression) |  | Critical (по политике компании) |
| Заход | Посадочные фары включены выше 10.000 ft AGL |  | Minor |
| Финальный заход / посадка | Заход с невыпущенными шасси (ниже 1500 ft AGL) |  | Critical |
| Финальный заход / посадка | Закрылки не в посадочной конфигурации (контроль ниже 1000 ft) |  | Major |
| Финальный заход / посадка | Нестабилизированный заход ниже 1000 ft AGL |  | Major |
| Посадка | Грубая посадка (> -500 fpm или > 1.5G) |  | Major |
| Посадка | Tailstrike на посадке |  | Critical |
| Посадка / пробег | Значительное отклонение от оси ВПП |  | Minor |
| Посадка / пробег | Не выпущены спойлеры после посадки |  | Minor |
| Посадка | Остаток топлива ниже минимального |  | Major |
| Руление после посадки | Посадочные фары не выключены после освобождения ВПП |  | Minor |
| Руление после посадки | Strobe не выключены после освобождения ВПП |  | Minor |
| Руление после посадки | Спойлеры не убраны |  | Minor |
| Стоянка по завершении | Рулёжные фары не выключены перед заруливанием |  | Minor |
| Стоянка по завершении | Beacon не выключён после остановки двигателей |  | Minor |
| Стоянка по завершении | Закрылки не убраны перед завершением рейса (если нет icing flag) |  | Minor |
| Общие данные | Перегрузка > 2G в полёте |  | Major |
| Общие данные | Крен > 35° или тангаж > 25° на малой высоте |  | Major |
| Общие данные | Превышение максимальной/минимальной скорости |  | Major |
| Общие данные | Вход в сваливание |  | Critical |
| Общие данные | Превышение Vfe/Vle/Vlo/лимита фар |  | Major |
| Общие данные | Посадка/взлёт ниже личного минимума |  | Critical |
| Общие данные | Долгое (≥15 сек) превышение скорости |  | Major → триггер расшифровки |
| Итоговое соблюдение профиля | Рейс без отклонений и по расписанию | + | Повышает рейтинг |
| Итоговое соблюдение профиля | Отклонение от расписания |  | Minor (требует указания причины) |


---

## 5. Коэффициенты штрафов по рангам

| Ранг | Множитель штрафов |
|------|------------------|
| Junior First Officer | x0.7 |
| First Officer | x0.8 |
| Senior First Officer | x0.9 |
| Junior Captain и выше | x1.0 |

---

## 6. Опыт (XP)

Формула:

XP = (часы полёта) * (рейтинг / 100) * K_company * K_aircraft * K_leg * K_route_repeat

### Коэффициенты по классу воздушного судна

| Класс ВС | Коэффициент |
|---------|-------------|
| Турбопроп | 0.9 |
| Narrow-body | 1.0 |
| Wide-body | 1.2 |

### Коэффициент за номер лега в трипе

| Leg | Коэффициент |
|-----|-------------|
| 1-й | 1.0 |
| 2-й | 0.8 |
| 3-й и далее | 0.7 |

### Коэффициент повторения маршрута

| Полёт по тому же маршруту | Коэффициент |
|---------------------------|-------------|
| Первый раз | 1.0 |
| Второй | 0.95 |
| Третий | 0.95² |
| Далее | продолжается мультипликативно |

---

## 7. Ранги пилота

| Ранг               | Требуемый XP        |
|--------------------|---------------------|
| Junior FO          | 0–500               |
| FO                 | 500–2000            |
| Senior FO          | 2000–5000           |
| Junior Captain     | 5000–10000          |
| Captain            | 10000–25000         |
| Senior Captain     | 25000+              |
| Instructor         | 25000+ и экзамен    |
| Head Instructor    | 50000+ и назначение |
| Head of Department | назначение          |
| Dispatcher         | назначение          |
| Director           | единственная роль   |

---

## 8. Снижение личного метеоминимума

Условия:
1. Выполнить **3 посадки** при погоде, соответствующей текущему минимуму (не лучше).
2. Посадки должны быть **стабилизированными** и **без критических нарушений**.
3. После выполнения открывается **экзамен в ЛК** (без инструктора).
4. Успешная сдача снижает минимум на одну ступень.
5. Минимум ограничен текущим рангом.

---

## 9. Ачивки

### Основные достижения
| Название                   | Условие                                 | Награда                                          |
|----------------------------|-----------------------------------------|--------------------------------------------------|
| Новобранец                 | первый экзамен и первый тип             | +100 XP                                          |
| Первый идеальный           | первый рейс с рейтингом 100             | +100 XP                                          |
| Три идеальных подряд       | три рейса подряд с 100                  | +500 XP                                          |
| 100 часов                  | налёт 100 часов                         | +500 XP                                          |
| 1000 часов                 | налёт 1000 часов                        | +10000 XP                                        |
| Региональник               | 3 рейса < 1.5 ч на не-heavy             | +200 XP                                          |
| Дальнобойщик               | 3 рейса > 4 ч                           | +300 XP                                          |
| Без происшествий           | 50 часов без расшифровок                | +250 XP                                          |
| Рейтинговый гигант         | 4 тайп-рейтинга                         | +500 XP                                          |
| Карьерный гигант           | progression turboprop → narrow → wide   | +500 XP                                          |
| Академик                   | своевременная сдача повторных экзаменов | +200 XP                                          |
| Добро пожаловать на работу | за первый выполненный ростер            | +150 XP                                          |
| Линейный пилот             | за 2 ростера подряд                     | +200 XP                                          |
| Человек-расписание         | за 4 ростера подряд                     | +500 XP                                          |
| Старший линейный пилот     | за 12 ростера подряд                    | +1000 XP и значок на аватарку в профиле          |
| Человек-авиакомпания       | 25 ростеров подряд                      | +3000 XP, значок на аватарку и уникальная ливрея |

### Пасхалки за забытый таймер
1. Помощник часовщика
2. Часовой мастер
3. Биг-Бен
4. Электромонтажник блоков электронно-механических часов
5. Машина времени
6. Хранитель времени
7. Изобретатель времени

(не дают XP)

---

## 10. Уровни расшифровок

| Уровень | Описание | Последствия |
|--------|----------|-------------|
| Minor | мелкие отклонения | запись в статистику |
| Major | значимое нарушение | требуется комментарий, возможна проверка |
| Critical | нарушение безопасности | возможная блокировка рейсов до тренажёра |

---

## 11. Денежная система (Credits)

### Источники получения Credits
- Выполнение рейсов (пропорционально XP)
- Получение некоторых ачивок
- Проведение тренажёрных сессий (для инструкторов)
- Ивенты авиакомпании

Credits не продаются за реальные деньги.

### Расходы

| Действие | Стоимость | Описание |
|---------|-----------|----------|
| Ранний ATPL | ~20000 Credits | Доступ к экзамену до ранга Captain |
| 5-й тайп-рейтинг | ~15000 Credits | Слот сверх базовых 4 |
| 6-й тайп-рейтинг | ~30000 Credits | Цена удваивается |
| Быстрое перемещение (hub → hub) | ~500 Credits | Телепорт без ожидания рейса |
| Быстрое перемещение в локацию самолёта | ~1500 Credits | Если самолёт в другом аэропорту |
| Сдвиг времени вылета | базовая цена + по часу | Мягкая корректировка расписания |
| Персонализация профиля | варьируется | Внешний вид и статус |

---

## 12. Ростеры и выполнение полётов по расписанию:

### Раз в неделю пилоту предлагается выполнить ростер. На дашборде всплывает окно

```
На этой неделе вам предложен плановый ростер:

UUWW → UWGG → UUWW | B378 |   Пн 18:30
UUWW → USTR        | B735 |   Пн 21:15
USTR → USSS → USTR | B735 |   Ср 14:20

Прогресс выполнения: 1 / 3   (осталось два рейса)

Полное выполнение: +200 XP бонусом

[Принять расписание] [Игнорировать]
```

Пилот может как согласиться, так и отказаться.

В случае выполнения получает дополнительный XP рассчитанный в зависимости от количества рейсов 
и их протяженности (20% от суммы опыта полученного при выполнении этих же рейсов, но без ростера),
а так же может получить ачивки связанные с выполнением ростера.

## 13. ACARS API (после MVP)

Планируется API для передачи отказов по MEL (например APU INOP, WX INOP, TCAS TA-ONLY) для повышения реализма эксплуатации и интеграции с разработчиками воздушных судов.

---

# skyhub.world — Упрощенная карта системы

## 1) Продуктовые части

### 1.1. Личный кабинет (Dispatch Center)
Основное веб-приложение. Все роли работают внутри него, интерфейс адаптируется по ролям.

Доступные зоны:
- **Главная** — статус пилота, активный трип, уведомления.
- **Рейсы** — расписание, фильтры, бронирование трипа, карта маршрутов.
- **Активный трип** — маршрут, самолёт (топливо, проверки), запасные, старт/завершение.
- **Логбук / PIREP** — история рейсов, рейтинг, детали отчётов.
- **Профиль пилота** — ранг, минимум, допуски, налёт, ачивки, прогрессия.
- **Экзамены и тренажёры** — теоретические тесты, тренажёрные сессии, заявки.

### 1.2. Инструкторская зона (внутри ЛК)
Для пилотов-инструкторов.
- Принятие новых пилотов.
- Назначение/проверка экзаменов.
- Проведение тренажёрных сессий (оценка, комментарий).
- Разбор «расшифровок» по рейсам (Major/Critical события).

### 1.3. Диспетчерская зона (внутри ЛК)
Для сотрудников планирования.
- Контроль расписания и доступности ВС.
- Мониторинг активных трипов.
- Оперативные сообщения пилотам.

### 1.4. Директорская зона (внутри ЛК)
Для руководства авиакомпании.
- Дашборды по качеству и выполнению рейсов.
- Кадровая политика (назначения ролей внутри ЛК).
- Настройка лёгких операционных политик и объявлений.

### 1.5. Админ-панель компании (отдельное приложение)
Доступ только у операционного администратора.
- Прямые изменения: флот, типы ВС, расписания.
- Импорт/парсинг данных.
- Настройка экзаменов, политик штрафов/XP.
- Интеграции (SimBrief, METAR/TAF).

---

## 2) Плагины для симуляторов
Вместо отдельного ACARS-клиента используются два плагина:

- **Плагин для X-Plane**
- **Плагин для MSFS**

Функции:
- Авторизация пилота.
- Привязка к активному трипу.
- Отслеживание фаз полёта и параметров.
- Выявление нарушений.
- Отправка PIREP и телеметрии.

(Дополнительные функции — после MVP.)

---

## 3) Роли и доступ

| Роль | Где работает | Основные возможности |
|------|--------------|---------------------|
| Пилот | ЛК (основные разделы) | Планирование и выполнение рейсов, экзамены, прогресс |
| Инструктор | ЛК (Инструкторская зона) | Проверка экзаменов, тренажёры, разбор ошибок |
| Диспетчер | ЛК (Диспетчерская зона) | Мониторинг рейсов, операции, сообщения |
| Директор | ЛК (Директорская зона) | Аналитика, объявления, базовые политики |
| Операционный админ | Отдельная админ-панель | Прямое управление сущностями и настройками |

---

## 4) Структура навигации ЛК

- Главная
- Рейсы
- Активный трип
- Логбук / PIREP
- Профиль
- Экзамены и тренажёры
- Сообщения
- (если есть роль) Инструкторская
- (если есть роль) Диспетчерская
- (если есть роль) Директорская

---

## 5) Основные пользовательские пути (для проектирования UX)

- Регистрация → апрув от инструктора → вступительный экзамен → назначение в пилоты.
- Запрос тайп-рейтинга → экзамен → тренажёр → доступ к типу.
- Выбор рейса → создание трипа → OFP → выполнение полёта → PIREP.
- Получение XP/ачивок → рост ранга → снижение метеоминимума.
- Инструктор: проверка экзаменов и тренажёров, разбор полётов.
- Диспетчер: контроль выполнения и оперативные сообщения.
- Директор: мониторинг и настройки компании.

---

## 6) Что *не* включаем в MVP
- Общий портал авиакомпаний.
- Корпоративная экономика.
- MEL/отказы для моделей.
- 3D-иммерсивные «комнаты брифинга».

```markdown end
